<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>WapMarket ‚Äî Marketplace GE</title>
<style>
/* ====== RESET Y TIPOGRAF√çA ====== */
*{margin:0;padding:0;box-sizing:border-box;}
body{font-family:'Futura PT', Arial, sans-serif; background:#f9f9f9; color:#111; display:flex; flex-direction:column; min-height:100vh;}
a{text-decoration:none;color:inherit;}

/* ====== VARIABLES ====== */
:root{
  --primary:#0056b3;
  --secondary:#0a2e5a;
  --accent:#ff7a18;
  --bg:#f9f9f9;
  --card:#fff;
  --shadow:0 8px 24px rgba(0,0,0,0.08);
  --radius:12px;
}

/* ====== HEADER ====== */
header{background:var(--primary); color:#fff; padding:12px 24px; display:flex; align-items:center; justify-content:space-between; position:sticky; top:0; z-index:50; box-shadow:0 2px 8px rgba(0,0,0,0.15);}
header .logo{font-weight:900; font-size:1.5rem; letter-spacing:.3px;}
header .search{flex:1; margin:0 16px; display:flex; max-width:600px;}
header .search input{flex:1; padding:10px 14px; border-radius:4px 0 0 4px; border:none; outline:none; font-size:1rem;}
header .search button{padding:0 16px; border:none; background:var(--accent); color:#fff; font-weight:700; border-radius:0 4px 4px 0; cursor:pointer;}
#btnOpenCart{background:transparent; border:1px solid rgba(255,255,255,.3); color:#fff; padding:8px 12px; border-radius:4px; cursor:pointer; display:flex; align-items:center; gap:6px; transition:0.2s;}
#btnOpenCart:hover{background:rgba(255,255,255,0.1);}

/* ====== LAYOUT PRINCIPAL ====== */
.wrapper{max-width:1200px;margin:16px auto; display:grid; grid-template-columns:300px 1fr; gap:16px; flex:1;}
aside{display:flex; flex-direction:column; gap:16px;}
.card{background:var(--card); border-radius:var(--radius); box-shadow:var(--shadow); padding:16px;}
#bizList div{padding:10px; border-radius:var(--radius); cursor:pointer; transition:0.2s; border:1px solid rgba(0,0,0,.06);}
#bizList div:hover{transform:translateY(-2px); box-shadow:0 4px 12px rgba(0,0,0,0.1);}
.chips{display:flex; flex-wrap:wrap; gap:8px;}
.chip{padding:6px 12px; border-radius:20px; border:1px solid var(--primary); cursor:pointer; font-weight:600; transition:0.15s;}
.chip.active{background:var(--primary); color:#fff; border:none;}

/* ====== SECCI√ìN PRODUCTOS ====== */
#results{display:grid; grid-template-columns:repeat(auto-fill,minmax(240px,1fr)); gap:16px;}
.product-item{background:var(--card); border-radius:var(--radius); box-shadow:var(--shadow); display:flex; flex-direction:column; overflow:hidden; transition:0.2s;}
.product-item:hover{transform:translateY(-4px); box-shadow:0 12px 28px rgba(0,0,0,0.12);}
.product-item img{width:100%; aspect-ratio:4/3; object-fit:cover;}
.product-item .meta{padding:12px; display:flex; flex-direction:column; gap:6px;}
.product-item h4{font-size:1rem; font-weight:700; color:var(--secondary);}
.product-item .price{font-weight:800; color:var(--accent);}
.product-item .badge{font-size:0.85rem; color:var(--primary);}

/* Botones internos */
.product-item .meta .actions{display:flex; gap:8px; justify-content:space-between;}
.product-item .meta button{flex:1; padding:8px; border:none; border-radius:6px; cursor:pointer; font-weight:700; transition:0.15s;}
.product-item .meta button:hover{opacity:0.9;}
.product-item .meta button.btn{background:var(--accent); color:#fff;}
.product-item .meta button.btn.ghost{background:#f1f1f1; color:#111;}

/* ====== CARRUSEL PUBLICIDAD ====== */
.wa-carousel-wrap{border-radius:var(--radius); overflow:hidden; box-shadow:var(--shadow); background:#fff; display:flex; gap:12px; margin-bottom:16px;}
.wa-slide{min-width:100%; flex-shrink:0; text-align:center;}
.wa-slide img{width:100%; height:200px; object-fit:cover; border-radius:var(--radius);}
.wa-slide p{margin-top:6px; font-weight:700; font-size:0.95rem; color:var(--secondary);}

/* ====== FOOTER ====== */
footer{background:#fff; border-top:1px solid rgba(0,0,0,.06); text-align:center; padding:14px; color:#555; margin-top:auto;}
footer a{margin:0 6px; color:var(--primary); font-weight:500;}

/* ====== MODAL CARRITO ====== */
.modal{position:fixed; inset:0; display:none; align-items:center; justify-content:center; background:rgba(0,0,0,0.5); z-index:9999;}
.dialog{background:#fff; border-radius:var(--radius); padding:16px; width:min(480px,90%); max-height:90%; overflow:auto;}
.dialog h3{margin-bottom:12px; font-weight:800;}
.dialog .small{font-size:0.85rem; color:#555;}
.dialog input, .dialog textarea{width:100%; padding:10px; border-radius:6px; border:1px solid rgba(0,0,0,.1); margin-bottom:8px;}
.dialog button{padding:10px; border:none; border-radius:6px; cursor:pointer; font-weight:700;}
.dialog button.btn{background:var(--accent); color:#fff;}
.dialog button.btn.ghost{background:#f1f1f1; color:#111;}

/* ====== RESPONSIVE ====== */
@media(max-width:900px){.wrapper{grid-template-columns:1fr;}}
@media(max-width:520px){header{flex-direction:column; gap:8px;} header .search{width:100%;} #results{grid-template-columns:1fr;}}
</style>
</head>
<body>

<header>
  <div class="logo">WapMarket</div>
  <form class="search" id="searchForm" onsubmit="return false;">
    <input id="q" placeholder="Buscar productos o servicios..." autocomplete="off"/>
    <button id="btnBuscar">Buscar</button>
    <ul id="suggBox" class="sugg"></ul>
  </form>
  <button id="btnOpenCart">Carrito üõí</button>
</header>

<main class="wrapper">
  <aside>
    <div class="card">
      <h3>Negocios disponibles</h3>
      <div id="bizList"></div>
    </div>
    <div class="card">
      <h3>Filtros</h3>
      <div class="chips" id="chips"></div>
      <select id="category" style="display:none;">
        <option value="">Todas</option>
        <option>Servicios</option><option>Comida</option><option>Tiendas</option><option>Salud</option><option>Transporte</option><option>Tecnolog√≠a</option>
      </select>
    </div>
  </aside>
  <section>
    <div class="wa-carousel-wrap" id="topAdsCarousel"></div>
    <div id="results"></div>
    <div style="text-align:center;margin-top:12px;">
      <button id="nextBtn" class="btn" style="display:none;">Ver m√°s</button>
    </div>
  </section>
</main>

<footer>
  <span>¬© WapMarket</span>
  <a href="#">Comprar</a>
  <a href="#">Restaurantes</a>
  <a href="#">Negocios</a>
</footer>

<script src="/api.js"></script>
<script>
// ====== L√ìGICA PRINCIPAL ======
const cart = JSON.parse(localStorage.getItem('cart')||'[]');
let selectedBusiness=null;
let currentProducts=[];

function saveCart(){ localStorage.setItem('cart',JSON.stringify(cart)); updateCartCount(); }
function update
